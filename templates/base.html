{% spaceless %}
{% load url from future %}
{% load i18n %}
{% load opencomparison_tags %}
{% load profile_tags %}
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" dir="{% if LANGUAGE_BIDI %}rtl{% else %}ltr{% endif %}" xml:lang="{{ LANGUAGE_CODE }}" lang="{{ LANGUAGE_CODE }}">
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8"/>
    <title>{% block head_title_base %}{{ SITE_TITLE }} : {% block head_title %}{% endblock %}{% endblock %}</title>
    <link rel="stylesheet" href="{{ STATIC_URL }}css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="{{ STATIC_URL }}css/oc.css" type="text/css" />
    <link rel="shortcut icon" href="{{ STATIC_URL }}img/favicon.png" />
    {% block extra_head %}{% endblock %}
</head>
<body>

<div class="header">
    <div class="container">
        <!-- Start of navbar -->
        <div class="navbar">

            <!-- Logo and title -->
            <a class="navbar-brand" href="{% url 'home' %}">
                <img src="{{ STATIC_URL }}img/logo_squares.png" />
                <h1>{{ SITE_TITLE }}</h1>
            </a>

            <!-- Main nav -->
            <ul class="nav navbar-nav">
                <li><a href="{% url 'home' %}">{% trans "Home" %}</a></li>
                <li><a href="{% url 'faq' %}">{% trans "FAQ" %}</a></li>
                {% if request.user.is_authenticated %}
                    <li><a href="{% url 'profile_detail' profile.github_account %}">{{ profile.github_account }}</a></li>
                    {% if request.user.is_staff %}
                        <li><a href="{% url 'admin:index' %}">{% trans "Admin" %}</a></li>
                    {% endif %}
                    <li><a href="{% url 'logout' %}">{% trans "Log out" %}</a></li>
                {% else %}
                    <li><a href="{% url 'socialauth_begin' 'github' %}{% if current_path %}?next={{ current_path }}{% endif %}">{% trans "Sign in with Github" %}</a></li>
                {% endif %}
            </ul>

            <!-- Search form -->
            <form action="{% url 'search' %}" class="navbar-form pull-left">
              <input id="id_q_p" type="text" class="form-control" style="width: 240px;">
              <button type="submit" class="btn btn-default">Go</button>
            </form>

        </div>
        <!-- End of navbar -->
    </div>
</div>

<div class="nav-grid-list">
    <div class="container">
        <div class="row">
            {% for grid_chunk in grid_headers %}
            <div class="col-lg-2">
                {% for tab in grid_chunk %}
                    {% if tab %}
                        <a class="nav-grid-name" href="{% url 'grid' tab.slug %}" title="{{ tab.description }}">{{ tab.title|truncatewords:"2" }}</a><br />
                    {% endif %}
                    {% if forloop.parentloop.last and forloop.last %}
                        <a class="nav-grid-name" href="{% url 'grids' %}">{% trans "&raquo; more grids..." %}</a>
                    {% endif %}
                {% endfor %}
            </div>
            {% endfor %}
        </div>
    </div>
</div>

    <div id="main">
      
        <!-- Start of grids nav -->
        <div id="tabhead">
            <div class="clearfix"></div>
            <a class="prev browse left">prev</a>
            <div class="scrollable">
                <div class="items">
                {% for grid_chunk in grid_headers %}
                    <div>
                        {% for tab in grid_chunk %}
                            {% if tab %}
                                <a href="{% url 'grid' tab.slug %}" title="{{ tab.description }}">{{ tab.title|truncatewords:"2" }}</a><br />
                            {% endif %}
                            {% if forloop.parentloop.last and forloop.last %}
                                <a href="{% url 'grids' %}">{% trans "&raquo; more grids..." %}</a>
                            {% endif %}
                        {% endfor %}
                    </div>
                {% endfor %}
                </div>
            </div>
            <a class="next browse right">next</a>
        </div> <!-- tabhead -->
        <div class="clearfix"></div> <!-- TODO: start using fluid columns on all pages, which may let us get rid of this -->
        <!-- End of grids nav -->

        {% block body_outer %}

            {% if messages %}
                <ul class="messages">
                    {% for message in messages %}
                    <li id="message_{{ forloop.counter }}"{% if message.tags %} class="{{ message.tags }}"{% endif %}>
                        <a href="#"><small>{% trans "clear" %}</small></a>
                        &nbsp;
                        {{ message }}
                    </li>
                    {% endfor %}
                </ul>
            {% endif %}
            
            {% block body %}
            {% endblock %}

        {% endblock %}
    </div> <!-- main -->
    
<div class="container">
    <!-- Start of footer -->
    <div class="row">
        <div class="col-12">
            &copy; 2010 <a href="http://pydanny.com">Daniel Greenfeld</a>, <a href="http://twitter.com/audreyr">Audrey Roy</a> & <a href="http://www.cartwheelweb.com/">Cartwheel Web</a>
            - <a href="{% url 'about' %}">{% trans "About" %}</a>
            - <a href="{% url 'faq' %}">{% trans "FAQ" %}</a>    
            - <a href="{% url 'terms' %}">{% trans "Terms" %}</a>
            - <a href="{% url 'contribute' %}">{% trans "Contribute" %}</a>            
            - <a href="http://readthedocs.org/docs/opencomparison/en/latest/api_docs.html">{% trans "API" %}</a>
            - <a href="{% url 'syndication' %}">{% trans "RSS / Atom" %}</a>  
            &nbsp;&nbsp; <a href="http://www.opencomparison.org">OpenComparison</a> sites:
            <a href="http://django.opencomparison.org">Django</a>
            - <a href="http://pyramid.opencomparison.org">Pyramid</a>
            - <a href="http://plone.opencomparison.org">Plone</a>
        </div>
    </div>
    <!-- End of footer -->
</div>

    {% block javascript %}
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.7.2/jquery.min.js" type="text/javascript"></script>
        <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.8.4/jquery-ui.min.js"></script>
        <script src="{{ STATIC_URL }}js/uni_form/uni-form.jquery.js" type="text/javascript"></script>
        <script src="{{ STATIC_URL }}js/jquery.tablesorter.min.js" type="text/javascript"></script>
        <script src="{{ STATIC_URL }}js/jquery.dataTables.min.js" type="text/javascript"></script>
        <script src="{{ STATIC_URL }}js/jquery.tools.min.js" type="text/javascript"></script>
        <script src="{{ STATIC_URL }}js/site.js" type="text/javascript"></script>
    {% endblock javascript %}

        {% fixed_ga %}
        {% block extra_body %}{% endblock %}
        
        <script type="text/javascript">
            $(function() {          
                $('input#id_q_p').click(function() {
                    $("input#id_q_p").val('');
                });                        

                // initialize scrollable
                $(".scrollable").scrollable();
            });

            $('#id_q_p').autocomplete({
              source: '{% url 'search_packages_autocomplete' %}',
              minLength: 1,
              open: function(event, ui) {           
                ac_top = $('.ui-autocomplete').css('top'); 
                $('.ui-autocomplete').css({'width': '250px', 'top': ac_top + 10 }); 
              }
            });
        </script>

    {{ PIWIK_CODE|safe }}
</body>
</html>
{% endspaceless %}
