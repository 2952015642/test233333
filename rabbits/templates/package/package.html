{% extends "package/base.html" %}

{% load i18n %}
{% load package_tags %}



{% block head_title %}{{ object.title }}{% endblock %}


{% block body %}
    
    <h1 id="package-name">{{ object.title }}</h1>
    <div id="package-version">{{ object.pypi_version }}</div>
    {% if request.user.is_authenticated %}
        <div id="package-editlink">
            <a href="{% url edit_package object.slug %}">Edit</a>
        </div>
    {% endif %}


    <p id="package-repos">
        GitHub repo: <a href="{{ object.repo_url }}">{{ object.repo_url }}</a>
    </p>

    {% if object.pypi_url %}
        <p id="package-pypilink">
            PyPi page: <a href="{{ object.pypi_url }}">{{ object.pypi_url }}</a>
        </p>
    {% endif %}

    <div id="package-statbox">
      <div class="package-statbox-col">
          <img src="{{ STATIC_URL }}img/eye_20x20_clear.png" />217<br/>
          <img src="{{ STATIC_URL }}img/fork_20x20_clear.png" />33
      </div>
      <div class="package-statbox-col">
          PyPi <img src="{{ STATIC_URL }}img/grayarrow_20x20_clear.png" />:  501<br/>
          Repo <img src="{{ STATIC_URL }}img/whitearrow_20x20_clear.png" />:  419
      </div>
      <div class="package-statbox-col">
          <img id="package-githubcommits" src="http://chart.apis.google.com/chart?cht=bvg&chs=450x30&chd=t:{{ object|commits_over_52 }}&chco=666666&chbh=a&chds=0,20" />
      </div>
    </div>

    <div class="clear"></div>
    <p>
        {{ object.repo_description }}
    </p>

    <h2>Project collaborators</h2>

    <p>
        {% for collaborator in object.participant_list %}
            <a href="http://github.com/{{ collaborator }}">{{ collaborator }}</a>
        {% endfor %}
        
    </p>

    <h2>Comparison Grids</h2>
    
    {% for grid in object.grids %}
        <div id="package-gridname"><a href="{% url grid grid.slug %}">{{ grid }}</a></div>    
    {% endfor %}
    
    <h2>Sites using this package</h2>
    
    <a href="{% url add_example object.slug %}">Add an example</a>
    
    {% with object.active_examples as examples %}
    {% if examples %}
    <ol>
        {% for example in examples %}
            <li>
                {% if request.user.is_authenticated %}
                    <a href="{% url edit_example object.slug example.id %}">edit</a>
                {% endif %}
                <a href="{{ example.url }}">{{ example.title }}</a>
            </li>
        {% endfor %}
    </ol>
    {% endif %}
    {% endwith %}

{% endblock %}

