{% extends "package/base.html" %}

{% load i18n %}
{% load uni_form_tags %}

{% block head_title %}{{ object.title }}{% endblock %}


{% block body %}
    
    <h1 id="package-name">{{ object.title }}</h1>
    <div id="package-version">{{ object.pypi_version }}</div>
    {% if request.user.is_authenticated %}
        <div id="package-editlink">
            <a href="{% url edit_package object.slug %}">Edit</a>
        </div>    
    {% endif %}

    <p id="package-repos">
        GitHub repo: <a href="{{ object.repo_url }}">{{ object.repo_url }}</a>
    </p>

    {% if object.pypi_url %}
        <p id="package-pypilink">
            PyPi page: <a href="{{ object.pypi_url }}">{{ object.pypi_url }}</a>
        </p>
    {% endif %}

    <div id="package-statbox">
      <img id="package-githubcommits" src="http://chart.apis.google.com/chart?cht=bvg&chs=450x30&chd=t:0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,5,6,8,0,0,6,0,0,0,1,2&chco=666666&chbh=a&chds=0,20" />
    </div>
    
    <p>
        {{ object.repo_description }}
    </p>

    <h2>Project collaborators</h2>

    <p>
        {% for collaborator in object.participant_list %}
            <a href="http://github.com/{{ collaborator }}">{{ collaborator }}</a>
        {% endfor %}
        
    </p>

    <h2>Comparison Grids</h2>

    <div id="package-gridname"><a href="#">Form Styling</a></div>
    <div id="package-gridname"><a href="#">Form Tools</a></div>
    <div id="package-gridname"><a href="#">508 Compliance Apps</a></div>
    
    <h2>Sites using this package</h2>
    
    <a href="{% url add_example object.slug %}">Add an example</a>
    
    {% with object.active_examples as examples %}
    {% if examples %}
    <ol>
        {% for example in examples %}
            <li>
                {% if request.user.is_authenticated %}
                    <a href="{% url edit_example object.slug example.id %}">edit</a>
                {% endif %}
                <a href="{{ example.url }}">{{ example.title }}</a>
            </li>
        {% endfor %}
    </ol>
    {% endif %}
    {% endwith %}

{% endblock %}
